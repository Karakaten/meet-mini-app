<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ó–∞—è–≤–∫–∞</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { box-sizing: border-box; font-family: sans-serif; }
    body { margin: 0; background: #1a1a1a; color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
    .card { background: #262626; border-radius: 16px; padding: 20px; width: 100%; max-width: 350px; text-align: center; }
    input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; background: #333; color: #fff; }
    .formats { display: flex; gap: 8px; margin: 10px 0; }
    .format-btn { flex: 1; padding: 10px; border-radius: 8px; background: #333; border: 2px solid transparent; color: #fff; cursor: pointer; font-size: 14px; }
    .format-btn.active { border-color: #a855f7; background: #3b1b5a; }
    .submit { width: 100%; padding: 15px; margin-top: 15px; border-radius: 8px; border: none; background: #a855f7; color: #fff; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body>
  <div class="card">
    <h2>üöÄ –ó–∞—è–≤–∫–∞</h2>
    <input id="name" placeholder="–¢–≤–æ–µ –∏–º—è" />
    <input id="date" placeholder="–ö–æ–≥–¥–∞?" />
    <div class="formats">
      <button class="format-btn" onclick="setFormat(this, 'üç∫ –ü–∏–≤–æ')">üç∫ –ü–∏–≤–æ</button>
      <button class="format-btn" onclick="setFormat(this, 'üè† –í –≥–æ—Å—Ç–∏')">üè† –í –≥–æ—Å—Ç–∏</button>
    </div>
    <button class="submit" onclick="sendData()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å üöÄ</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let selectedFormat = "–ù–µ –≤—ã–±—Ä–∞–Ω";
    const BOT_TOKEN = '8522129872:AAGAIJn9K05673T86y4boB8drP8MYwwNCN4';
    const MY_ID = '269547089';

    function setFormat(el, val) {
      document.querySelectorAll('.format-btn').forEach(b => b.classList.remove('active'));
      el.classList.add('active');
      selectedFormat = val;
    }

    async function sendData() {
      const name = document.getElementById('name').value || "–ê–Ω–æ–Ω–∏–º";
      const date = document.getElementById('date').value || "–ù–µ —É–∫–∞–∑–∞–Ω–æ";
      const user = tg.initDataUnsafe?.user?.username || "–Ω–µ—Ç_–Ω–∏–∫–∞";
      
      const text = `üì© –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê!\nüë§ –û—Ç: ${name} (@${user})\nüìÖ –ö–æ–≥–¥–∞: ${date}\nüìç –§–æ—Ä–º–∞—Ç: ${selectedFormat}`;
      
      try {
        const resp = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: MY_ID, text: text })
        });
        
        if (resp.ok) {
          tg.close();
        } else {
          const err = await resp.json();
          alert("–û—à–∏–±–∫–∞ –±–æ—Ç–∞: " + err.description);
        }
      } catch (e) {
        alert("–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: " + e.message);
      }
    }
  </script>
</body>
</html>
